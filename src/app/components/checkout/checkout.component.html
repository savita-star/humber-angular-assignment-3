<mat-toolbar color="primary">
  <span class="fill-remaining-space">Checkout Form</span>
</mat-toolbar>

<div class="container">
  <h1>Total {{ dataStoreService?.total$ | async }}</h1>
  <form
    [formGroup]="checkoutForm"
    (ngSubmit)="onSubmit(checkoutForm.getRawValue())"
    class="form"
  >
    <mat-form-field class="form-element">
      <input
        matInput
        placeholder="Please enter firstname"
        formControlName="firstname"
      />
    </mat-form-field>

    <mat-form-field class="form-element">
      <input
        matInput
        placeholder="Please enter lastname"
        formControlName="lastname"
      />
    </mat-form-field>

    <mat-form-field class="form-element">
      <textarea
        matInput
        placeholder="Please enter address"
        matTextareaAutosize
        matAutosizeMinRows="2"
        matAutosizeMaxRows="5"
        formControlName="address"
      ></textarea>
    </mat-form-field>

    <mat-form-field class="form-element">
      <input matInput placeholder="Please enter city" formControlName="city" />
    </mat-form-field>

    <mat-form-field class="form-element">
      <input
        matInput
        placeholder="Please enter postal code"
        formControlName="postalCode"
      />
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-element">
      <mat-label>Country</mat-label>
      <mat-select formControlName="country" required>
        <mat-option *ngFor="let ct of countries" [value]="ct">
          {{ ct }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-element">
      <mat-label>Payment Method</mat-label>
      <mat-select formControlName="paymentMethod" required>
        <mat-option *ngFor="let pay of payment" [value]="pay">
          {{ pay }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="form-element">
      <input
        matInput
        creditCard
        maxlength="16"
        placeholder="Please enter credit card number"
        formControlName="card"
      />
    </mat-form-field>

    <mat-form-field class="form-element">
      <input
        matInput
        maxlength="7"
        placeholder="Credit Card expiry - MM/YYYY"
        formControlName="expiryDate"
      />
      <mat-error *ngIf="checkoutForm.controls['expiryDate'].invalid">
        Expiry date format should be MM/YYYY
      </mat-error>
    </mat-form-field>

    <mat-form-field class="form-element">
      <input
        matInput
        creditCard
        placeholder="Please enter cvc"
        maxlength="4"
        formControlName="cvc"
      />
    </mat-form-field>

    <mat-form-field class="form-element">
      <input
        matInput
        placeholder="Please enter card holder name"
        formControlName="cardHolderName"
      />
    </mat-form-field>

    <div class="form-element">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        class="button"
        [disabled]="!checkoutForm.valid"
      >
        Submit
      </button>
    </div>
  </form>
</div>
